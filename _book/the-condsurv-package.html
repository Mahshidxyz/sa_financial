<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>A short course on Survival Analysis applied to the Financial Industry</title>
  <meta name="description" content="This is a short course on survival analysis applied to the financial field.">
  <meta name="generator" content="bookdown 0.5.4 and GitBook 2.6.7">

  <meta property="og:title" content="A short course on Survival Analysis applied to the Financial Industry" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a short course on survival analysis applied to the financial field." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A short course on Survival Analysis applied to the Financial Industry" />
  
  <meta name="twitter:description" content="This is a short course on survival analysis applied to the financial field." />
  

<meta name="author" content="Marta Sestelo">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="estimation-of-the-conditional-survival.html">
<link rel="next" href="appendix-install.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">A short course on Survival Analysis</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="programing-language-and-software.html"><a href="programing-language-and-software.html"><i class="fa fa-check"></i>Programing language and software</a></li>
<li class="chapter" data-level="" data-path="main-references-and-credits.html"><a href="main-references-and-credits.html"><i class="fa fa-check"></i>Main references and credits</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro-what.html"><a href="intro-what.html"><i class="fa fa-check"></i><b>1.1</b> What is survival analysis?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro-what.html"><a href="intro-what.html#time-time-origen-time-scale-event"><i class="fa fa-check"></i><b>1.1.1</b> Time, time origen, time scale, event</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro-what.html"><a href="intro-what.html#goals-of-the-survival-analysis"><i class="fa fa-check"></i><b>1.1.2</b> Goals of the survival analysis</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro-censor.html"><a href="intro-censor.html"><i class="fa fa-check"></i><b>1.2</b> Censoring</a></li>
<li class="chapter" data-level="1.3" data-path="intro-notation.html"><a href="intro-notation.html"><i class="fa fa-check"></i><b>1.3</b> Some notation</a></li>
<li class="chapter" data-level="1.4" data-path="intro-functions.html"><a href="intro-functions.html"><i class="fa fa-check"></i><b>1.4</b> Survival/hazard functions</a></li>
<li class="chapter" data-level="1.5" data-path="relation-between-functions.html"><a href="relation-between-functions.html"><i class="fa fa-check"></i><b>1.5</b> Relation between functions</a></li>
<li class="chapter" data-level="1.6" data-path="intro-distri.html"><a href="intro-distri.html"><i class="fa fa-check"></i><b>1.6</b> Some common distributions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="km.html"><a href="km.html"><i class="fa fa-check"></i><b>2</b> Kaplan Meier estimator</a><ul>
<li class="chapter" data-level="2.1" data-path="estimating-survival-by-means-of-the-kaplan-meier-estimator.html"><a href="estimating-survival-by-means-of-the-kaplan-meier-estimator.html"><i class="fa fa-check"></i><b>2.1</b> Estimating survival by means of the Kaplan Meier estimator</a><ul>
<li class="chapter" data-level="2.1.1" data-path="estimating-survival-by-means-of-the-kaplan-meier-estimator.html"><a href="estimating-survival-by-means-of-the-kaplan-meier-estimator.html#other-representation"><i class="fa fa-check"></i><b>2.1.1</b> Other representation</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="pointwise-confidence-interval-for-st.html"><a href="pointwise-confidence-interval-for-st.html"><i class="fa fa-check"></i><b>2.2</b> Pointwise confidence interval for <span class="math inline">\(S(t)\)</span></a></li>
<li class="chapter" data-level="2.3" data-path="comparing-survival-curves.html"><a href="comparing-survival-curves.html"><i class="fa fa-check"></i><b>2.3</b> Comparing survival curves</a></li>
<li class="chapter" data-level="2.4" data-path="pros-and-cons-of-the-kaplan-meirs-estimator.html"><a href="pros-and-cons-of-the-kaplan-meirs-estimator.html"><i class="fa fa-check"></i><b>2.4</b> Pros and Cons of the Kaplan-Meirs estimator</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cox.html"><a href="cox.html"><i class="fa fa-check"></i><b>3</b> The Cox Proportional Hazards Model</a><ul>
<li class="chapter" data-level="3.1" data-path="the-semiparametric-model.html"><a href="the-semiparametric-model.html"><i class="fa fa-check"></i><b>3.1</b> The semiparametric model</a></li>
<li class="chapter" data-level="3.2" data-path="estimation.html"><a href="estimation.html"><i class="fa fa-check"></i><b>3.2</b> Estimation</a></li>
<li class="chapter" data-level="3.3" data-path="computing-the-hazard-ratio.html"><a href="computing-the-hazard-ratio.html"><i class="fa fa-check"></i><b>3.3</b> Computing the Hazard Ratio</a></li>
<li class="chapter" data-level="3.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>3.4</b> Hypothesis testing</a></li>
<li class="chapter" data-level="3.5" data-path="adjusting-survival-curves.html"><a href="adjusting-survival-curves.html"><i class="fa fa-check"></i><b>3.5</b> Adjusting Survival Curves</a></li>
<li class="chapter" data-level="3.6" data-path="how-to-evaluate-the-ph-assumption.html"><a href="how-to-evaluate-the-ph-assumption.html"><i class="fa fa-check"></i><b>3.6</b> How to evaluate the PH assumption?</a><ul>
<li class="chapter" data-level="3.6.1" data-path="how-to-evaluate-the-ph-assumption.html"><a href="how-to-evaluate-the-ph-assumption.html#graphical-approach"><i class="fa fa-check"></i><b>3.6.1</b> Graphical approach</a></li>
<li class="chapter" data-level="3.6.2" data-path="how-to-evaluate-the-ph-assumption.html"><a href="how-to-evaluate-the-ph-assumption.html#goodness-of-fit-test"><i class="fa fa-check"></i><b>3.6.2</b> Goodness-of-fit test</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="non-proportional-hazards-and-now-what.html"><a href="non-proportional-hazards-and-now-what.html"><i class="fa fa-check"></i><b>3.7</b> Non-Proportional Hazards… and now what?</a><ul>
<li class="chapter" data-level="3.7.1" data-path="non-proportional-hazards-and-now-what.html"><a href="non-proportional-hazards-and-now-what.html#an-example-stratified-proportional-hazards-models"><i class="fa fa-check"></i><b>3.7.1</b> An example… Stratified Proportional Hazards Models</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="why-cox-ph-model-is-so-popular-pros-of-the-model.html"><a href="why-cox-ph-model-is-so-popular-pros-of-the-model.html"><i class="fa fa-check"></i><b>3.8</b> Why Cox PH model is so popular? (pros of the model)</a></li>
<li class="chapter" data-level="3.9" data-path="bonus-track-1-additive-cox-model.html"><a href="bonus-track-1-additive-cox-model.html"><i class="fa fa-check"></i><b>3.9</b> Bonus track 1: Additive Cox model</a></li>
<li class="chapter" data-level="3.10" data-path="bonus-track-2-machine-learning-for-estimating-the-cox-pm-model.html"><a href="bonus-track-2-machine-learning-for-estimating-the-cox-pm-model.html"><i class="fa fa-check"></i><b>3.10</b> Bonus track 2: Machine Learning for estimating the Cox PM model</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="joint-models-for-longitudinal-and-time-to-event-data.html"><a href="joint-models-for-longitudinal-and-time-to-event-data.html"><i class="fa fa-check"></i><b>4</b> Joint Models for Longitudinal and Time-to-Event Data</a><ul>
<li class="chapter" data-level="4.1" data-path="linear-mixed-models.html"><a href="linear-mixed-models.html"><i class="fa fa-check"></i><b>4.1</b> Linear Mixed Models</a></li>
<li class="chapter" data-level="4.2" data-path="estimation-of-the-joint-model.html"><a href="estimation-of-the-joint-model.html"><i class="fa fa-check"></i><b>4.2</b> Estimation of the Joint Model</a></li>
<li class="chapter" data-level="4.3" data-path="the-jm-package.html"><a href="the-jm-package.html"><i class="fa fa-check"></i><b>4.3</b> The <code>JM</code> package</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="condsurv.html"><a href="condsurv.html"><i class="fa fa-check"></i><b>5</b> Conditinal Survival with <code>condSURV</code></a><ul>
<li class="chapter" data-level="5.1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="notation.html"><a href="notation.html"><i class="fa fa-check"></i><b>5.2</b> Notation</a></li>
<li class="chapter" data-level="5.3" data-path="estimation-of-the-conditional-survival.html"><a href="estimation-of-the-conditional-survival.html"><i class="fa fa-check"></i><b>5.3</b> Estimation of the conditional survival</a><ul>
<li class="chapter" data-level="5.3.1" data-path="estimation-of-the-conditional-survival.html"><a href="estimation-of-the-conditional-survival.html#kaplan-meier-weighted-estimator-kmw"><i class="fa fa-check"></i><b>5.3.1</b> Kaplan-Meier Weighted Estimator (<code>KMW</code>)</a></li>
<li class="chapter" data-level="5.3.2" data-path="estimation-of-the-conditional-survival.html"><a href="estimation-of-the-conditional-survival.html#the-landmark-approach-ldm"><i class="fa fa-check"></i><b>5.3.2</b> The Landmark approach (<code>LDM</code>)</a></li>
<li class="chapter" data-level="5.3.3" data-path="estimation-of-the-conditional-survival.html"><a href="estimation-of-the-conditional-survival.html#the-presmoothed-landmark-approach-pldm"><i class="fa fa-check"></i><b>5.3.3</b> The Presmoothed Landmark approach (<code>PLDM</code>)</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="the-condsurv-package.html"><a href="the-condsurv-package.html"><i class="fa fa-check"></i><b>5.4</b> The <code>condSURV</code> package</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-install.html"><a href="appendix-install.html"><i class="fa fa-check"></i><b>A</b> Installation of <code>R</code> and <code>RStudio</code></a></li>
<li class="chapter" data-level="B" data-path="appendix-rstudio.html"><a href="appendix-rstudio.html"><i class="fa fa-check"></i><b>B</b> Introduction to <code>RStudio</code></a></li>
<li class="chapter" data-level="C" data-path="appendix-r.html"><a href="appendix-r.html"><i class="fa fa-check"></i><b>C</b> Introduction to <code>R</code></a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A short course on Survival Analysis applied to the Financial Industry</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-condsurv-package" class="section level2">
<h2><span class="header-section-number">5.4</span> The <code>condSURV</code> package</h2>
<p>To illustrate our methods we will use data from a German Breast cancer study <span class="citation">(David W. Hosmer Jr. <a href="#ref-book:1506027">2008</a>)</span>. This data set is freely available as part of the `condSURV package.</p>
<p>In this dataset, a total of 686 woman with primary node positive Breast cancer were recruited in the period between 1984 and 1989. From this total, 299 developed a recurrence and among these 171 died.</p>
<p>For each patient, the two event times (time to recurrence and time to death) and the corresponding indicator status is recorded. Other covariates were also recorded. The covariate <code>recurrence</code> is the only time-dependent covariate, while the other covariates included are fixed. Recurrence can be considered as an intermediate transient state and modeled using a three-state progressive model with states <strong>Alive and disease-free</strong>, <strong>Alive with Recurrence</strong> and <strong>Dead</strong>. You can see an example at Figure <a href="the-condsurv-package.html#fig:breast">5.3</a>.</p>
<p>The effect of <code>recurrence</code> is important on the patient outcome and can be studied through the ordered multivariate event time data of time-to-event from enrollment, to recurrence and to death. Results obtained from the estimation of the conditional survival probabilities, <span class="math inline">\(S(y\mid x)=P(T&gt;y|T_1&gt;x)\)</span>, can be used to understand which individuals without recurring cancer after surgery are most likely to survive from their disease and which would benefit from more personal attention, closer follow-up and monitoring.</p>
<div class="figure" style="text-align: center"><span id="fig:breast"></span>
<img src="images/alive3box.jpg" alt="Scheme of the model."  />
<p class="caption">
Figure 5.3: Scheme of the model.
</p>
</div>
<p>Bellow is an excerpt of the data.frame with one row per individual</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(gbcsCS)
##   id  diagdateb    recdate  deathdate age menopause hormone size grade
## 1  1 17-08-1984 15-04-1988 16-11-1990  38         1       1   18     3
## 2  2 25-04-1985 15-03-1989 22-10-1990  52         1       1   20     1
## 3  3 11-10-1984 12-04-1988 06-10-1988  47         1       1   30     2
## 4  4 29-06-1984 24-11-1984 24-11-1984  40         1       1   24     1
## 5  5 03-07-1984 09-08-1989 09-08-1989  64         2       2   19     2
## 6  6 24-07-1984 08-11-1989 08-11-1989  49         2       2   56     1
##   nodes prog_recp estrg_recp rectime censrec survtime censdead
## 1     5       141        105    1337       1     2282        0
## 2     1        78         14    1420       1     2006        0
## 3     1       422         89    1279       1     1456        1
## 4     3        25         11     148       0      148        0
## 5     1        19          9    1863       0     1863        0
## 6     3       356         64    1933       0     1933        0

kmw1 &lt;-<span class="st"> </span><span class="kw">survCOND</span>(<span class="kw">survCS</span>(rectime, censrec, survtime, censdead) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,
<span class="dt">x =</span> <span class="dv">365</span>, <span class="dt">y =</span> <span class="dv">1460</span>, <span class="dt">data =</span> gbcsCS, <span class="dt">method =</span> <span class="st">&quot;KMW&quot;</span>, <span class="dt">conf =</span> <span class="ot">TRUE</span>, <span class="dt">n.boot =</span> <span class="dv">100</span>)

<span class="kw">summary</span>(kmw1)
## 
## P(T&gt;y|T1&gt;365) 
## 
##     y  estimate lower 95% CI upper 95% CI
##  1460 0.8050317      0.77625    0.8395263</code></pre></div>
<p>With the previous code you can obtain the estimates for the probability that a woman survives more than four years given that she is alive and disease-free at one year after the surgery. Note that the package contains the function <code>survCS</code> which takes the input data as an <code>R</code> formula and creates a survival object among the chosen variables for analysis. This function will verify if the data has been introduced correctly and create a <code>survCS</code> object. Arguments in this function must be introduced in the following order <code>time1</code>, <code>event1</code>, <code>time2</code>, <code>event2</code>,…, <code>Stime</code> and <code>event</code>, where <code>time1</code>, <code>time2</code>, …, <code>Stime</code> are ordered event times and <code>event1</code>, <code>event2</code>,…, <code>event</code> their corresponding indicator statuses. This function plays a similar role as the <code>Surv</code> function in the <code>survival</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># including more times</span>
kmw2 &lt;-<span class="st"> </span><span class="kw">survCOND</span>(<span class="kw">survCS</span>(rectime, censrec, survtime, censdead) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,
<span class="dt">x =</span> <span class="dv">365</span>, <span class="dt">y =</span> <span class="dv">365</span> <span class="op">*</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="dt">data =</span> gbcsCS, <span class="dt">method =</span> <span class="st">&quot;KMW&quot;</span>, <span class="dt">conf =</span> <span class="ot">TRUE</span>) 

<span class="kw">summary</span>(kmw2)
## 
## P(T&gt;y|T1&gt;365) 
## 
##     y  estimate lower 95% CI upper 95% CI
##   365 1.0000000    1.0000000    1.0000000
##   730 0.9429857    0.9215913    0.9604599
##  1095 0.8805697    0.8542154    0.9050319
##  1460 0.8050317    0.7717641    0.8406205
##  1825 0.7506686    0.7052949    0.7905356
##  2190 0.6627422    0.6040739    0.7232711
##  2555 0.6205942    0.5157023    0.7088350


<span class="co"># with y omitted</span>
kmw3 &lt;-<span class="st"> </span><span class="kw">survCOND</span>(<span class="kw">survCS</span>(rectime, censrec, survtime, censdead) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,
<span class="dt">x =</span> <span class="dv">365</span>, <span class="dt">data =</span> gbcsCS, <span class="dt">method =</span> <span class="st">&quot;KMW&quot;</span>, <span class="dt">conf =</span> <span class="ot">TRUE</span>)

<span class="co"># note the `times` argument</span>
<span class="kw">summary</span>(kmw3, <span class="dt">times =</span> <span class="kw">c</span>(<span class="dv">730</span>, <span class="dv">1095</span>))  
##     y  estimate lower 95% CI upper 95% CI
##   730 0.9429857    0.9216899    0.9620051
##  1095 0.8805697    0.8532885    0.9092549</code></pre></div>
<p>In addition, one may also be interested in calculating the conditional survival function, <span class="math inline">\(S(y\mid x)=P(T&gt;y|T_1\leq x)\)</span>. This is the probability of the individual to be alive at time <span class="math inline">\(y\)</span> conditional that he/she is alive with recurrence at a previous time <span class="math inline">\(x\)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># P(T &gt; y | T1 &lt; x)</span>
kmw4 &lt;-<span class="st"> </span><span class="kw">survCOND</span>(<span class="kw">survCS</span>(rectime, censrec, survtime, censdead) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,
<span class="dt">x =</span> <span class="dv">365</span>, <span class="dt">data =</span> gbcsCS, <span class="dt">method =</span> <span class="st">&quot;KMW&quot;</span>, <span class="dt">conf =</span> <span class="ot">TRUE</span>, <span class="dt">lower.tail =</span> <span class="ot">TRUE</span>) 

<span class="kw">summary</span>(kmw4, <span class="dt">times =</span> <span class="kw">c</span>(<span class="dv">730</span>, <span class="dv">1095</span>))
##     y  estimate lower 95% CI upper 95% CI
##   730 0.3448798    0.2111348    0.4662095
##  1095 0.2165459    0.1024390    0.3146710</code></pre></div>
<p>Similarly, one can obtain the results for the landmark methods (<code>LDM</code> and <code>PLDM</code>) using the same function <code>survCOND</code>. The unsmoothed landmark estimator is obtained using argument <code>method = &quot;LDM&quot;</code> whereas for obtaining the presmoothed landmark estimator the argument <code>presmooth = TRUE</code> is also required.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(kmw3, <span class="dt">confcol =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Time (days)&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;S(y|365)&quot;</span>)</code></pre></div>
<p><img src="bookdown_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<p>One important goal is to obtain estimates for the above estimated quantities (conditional survival probabilities) conditionally on current or past covariate measures. The current version of the package allow the inclusion of a single covariate.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grade &lt;-<span class="st"> </span><span class="kw">survCOND</span>(<span class="kw">survCS</span>(rectime, censrec, survtime, censdead) <span class="op">~</span><span class="st"> </span><span class="kw">as.factor</span>(grade),
                  <span class="dt">x =</span> <span class="dv">365</span>, <span class="dt">data =</span> gbcsCS, <span class="dt">method =</span> <span class="st">&quot;LDM&quot;</span>, <span class="dt">conf =</span> <span class="ot">FALSE</span>)
<span class="kw">plot</span>(grade)</code></pre></div>
<p><img src="bookdown_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<p>Finally, the package also allow the user to estimate the conditional survival given a continuous covariate (i.e., objects of class ‘integer’ or ‘numeric’). For example, estimates and plot for the conditional survival for women aged 60 years, <span class="math inline">\(S(y|x,Z=z)=P(T&gt;y|T_1&gt;x, age=60)\)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age &lt;-<span class="st"> </span><span class="kw">survCOND</span>(<span class="kw">survCS</span>(rectime, censrec, survtime, censdead) <span class="op">~</span><span class="st"> </span>age, <span class="dt">x =</span> <span class="dv">365</span>, 
                <span class="dt">z.value =</span> <span class="dv">60</span>, <span class="dt">data =</span> gbcsCS, <span class="dt">conf =</span> <span class="ot">FALSE</span>)
<span class="kw">plot</span>(age)</code></pre></div>
<p><img src="bookdown_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>

<div class="rmdhint_sestelo">
The <strong>inclusion of continuous covariates</strong> can be computationally demanding. In particular, the use of bootstrap resampling techniques are time-consuming processes because it is necessary to estimate the model a great number of times.
</div>

<p>The use of the <code>condSURV</code> package to more than two consecutive events is illustrated in the Appendix of <span class="citation">Meira-Machado and Sestelo (<a href="#ref-meiramachado-sestelo:2016">2016</a><a href="#ref-meiramachado-sestelo:2016">b</a>)</span>.</p>

</div>
<!-- </div> -->



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-book:1506027">
<p>David W. Hosmer Jr., Susanne May, Stanley Lemeshow. 2008. <em>Applied Survival Analysis : Regression Modeling of Time-to-Event Data</em>. 2ed. ed. Wiley Series in Probability and Statistics. Wiley-Interscience. <a href="http://gen.lib.rus.ec/book/index.php?md5=41b0866e0c2edb9d5bb6e332deb9cbb5" class="uri">http://gen.lib.rus.ec/book/index.php?md5=41b0866e0c2edb9d5bb6e332deb9cbb5</a>.</p>
</div>
<div id="ref-meiramachado-sestelo:2016">
<p>Meira-Machado, Luis, and Marta Sestelo. 2016b. “condSURV: An R Package for the Estimation of the Conditional Survival Function for Ordered Multivariate Failure Time Data.” <em>The R Journal</em> 8 (2): 460–73. <a href="http://journal.r-project.org/archive/2016-2/meiramachado-sestelo.pdf" class="uri">http://journal.r-project.org/archive/2016-2/meiramachado-sestelo.pdf</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="estimation-of-the-conditional-survival.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix-install.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06-condsurv.Rmd",
"text": "Edit"
},
"download": ["bookdown.pdf", "bookdown.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
